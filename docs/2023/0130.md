# 0130 ~ 0205

## 0201 - API Gateway
#### **[ API Gateway 란? ]**
서비스로 전달되는 모든 API 요청의 관문 역할을 하는 서버. 시스템의 아키텍처를 내부로 숨기고 외부의 요청에 대한 응답만을 적절한 형태로 응답 (프록시 역할)

API Gateway는 모든 서버로의 요청을 단일지점을 거쳐서 처리하도록 한다. 이를 통해 공통된 로직 처리나 인증 및 인가 처리, 라우팅 처리등을 할 수 있다.

#### **[ 인증/인가에 관련된 기능 ]**
- 엔드포인트별 API 호출 인증
- 엔드포인트별 API 요청 인가

#### **[ 라우팅 ]**
- 로드밸런싱
- 서비스 및 클라이언트 별 엔드포인트 제공
- 메시지 또는 헤더기반 라우팅

#### **[ 공통 로직 처리 ]**

#### **[ Mediation(메디에이션) ]**
메디에이션이란 '중재' 또는 '조정'이라는 의미를 가지는데 API 서버가 클라이언트가 원하는 API 형태와 다를때 API 게이트웨이가 이를 변경해주는 기능을 이야기한다.

- 메시지 포맷 변환
- 프로토콜 변환
- 메시지 호출 패턴 변환
- Aggregation(어그레게이션) : API를 묶어서 하나의 API 처럼 처리하게 보이는 동작

#### **[ 로깅 및 미터링 ]**
- API 호출 로깅
- API Metering & Charing (미터링 & 차징) : API 미터링과 차징은 유료 API 서비스를 위한 기능으로 측정할 수 있는 지표들을 기록하는 서비스

#### **[ QoS 조정(Quality of service) ]**
Qos 조정 기능이란 API 서비스를 클라이언트 대상에 따라서 서비스 레벨을 조정하는 기능이다.  
호출횟수를 제한 한다거나, 전송 용량이나, 네이트워크 대역폭을 유료/무료 사용자에 따라 다르게 적용하는 것과 같은 기능을 QoS 기능이라고 한다.

<br>

## 0202 - jasypt
> Jasypt is a java library which allows the developer to add basic encryption capabilities to his/her projects with minimum effort, and without the need of having deep knowledge on how cryptography works.

공개된 프로젝트의 private 정보에 대한 보안을 처리하기 위해 여러가지 방법이 있다. 그 중 라이브러리를 통해 개발정보를 암호화 하는 방법을 소개한다.

**[ 사용법 ]**
- 의존성 추가
```gradle
dependencies {
	implementation 'com.github.ulisesbocchio:jasypt-spring-boot-starter'
}
```

- Encrypt Key 생성
https://www.devglan.com/online-tools/jasypt-online-encryption-decryption  
jasypt 관련 설정 시 password를 설정하는 부분이 있다. 해당 password를 암호화하기 위해 해당 사이트에서 암호화

- Configuration 생성
```java
@Configuration
@EnableEncryptableProperties
public class JasyptConfig {
    @Bean(name = "encryptorBean")
    public StringEncryptor stringEncryptor(SimpleStringPBEConfig simpleStringPBEConfig) {
        PooledPBEStringEncryptor stringEncryptor = new PooledPBEStringEncryptor();
        stringEncryptor.setConfig(simpleStringPBEConfig);
        return stringEncryptor;
    }

    @Bean
    @ConfigurationProperties("config.encrypt")
    public SimpleStringPBEConfig simpleStringPBEConfig() {
        return new SimpleStringPBEConfig();
    }
}
```

- properties 설정 추가
```yml
jasypt:
  encryptor:
    bean: {빈이름}
config:
  encrypt:
    password: {암호화된 패스워드}
    algorithm: PBEWithMD5AndDES
    provider-name: SunJCE
    pool-size: 1
    key-obtention-iterations: 1000
    string-output-type: base64
```

- 암호화
```java
@SpringBootTest
class JasyptConfigTest {
    @Autowired
    @Qualifier("encryptorBean")
    private StringEncryptor stringEncryptor;

    @Test
    public void generatePassword() {
        String encrypt = stringEncryptor.encrypt("password");
        System.out.println(encrypt);
        String decrypt = stringEncryptor.decrypt(encrypt);
        System.out.println(decrypt);
    }
}
```

- 적용
`ENC("암호화 password")` 형식으로 암호화된 값 적용

```yml
spring:
  datasource:
    driver-class-name: org.mariadb.jdbc.Driver
    url: jdbc:mariadb://localhost:3306
    username: dbuser
    password: ENC(WHXxOvGjJa7qXjALhA7ghdoYksJjabL/)
```

<br>
## 0203 - 
### 
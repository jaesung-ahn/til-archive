<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>0314 - 0320 | TIL</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="Today I Learned">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.7d1de6ab.css" as="style"><link rel="preload" href="/TIL/assets/js/app.5de8cb9d.js" as="script"><link rel="preload" href="/TIL/assets/js/2.4f3b10d1.js" as="script"><link rel="preload" href="/TIL/assets/js/54.28695de9.js" as="script"><link rel="prefetch" href="/TIL/assets/js/10.f1cbf27c.js"><link rel="prefetch" href="/TIL/assets/js/11.dd9c7322.js"><link rel="prefetch" href="/TIL/assets/js/12.6be9f680.js"><link rel="prefetch" href="/TIL/assets/js/13.f858a661.js"><link rel="prefetch" href="/TIL/assets/js/14.25ecca3c.js"><link rel="prefetch" href="/TIL/assets/js/15.79f23de7.js"><link rel="prefetch" href="/TIL/assets/js/16.01009a95.js"><link rel="prefetch" href="/TIL/assets/js/17.14399a66.js"><link rel="prefetch" href="/TIL/assets/js/18.99221f05.js"><link rel="prefetch" href="/TIL/assets/js/19.ded1bc97.js"><link rel="prefetch" href="/TIL/assets/js/20.a5f22302.js"><link rel="prefetch" href="/TIL/assets/js/21.5d765a74.js"><link rel="prefetch" href="/TIL/assets/js/22.649dccef.js"><link rel="prefetch" href="/TIL/assets/js/23.73bc9904.js"><link rel="prefetch" href="/TIL/assets/js/24.07c29462.js"><link rel="prefetch" href="/TIL/assets/js/25.648f649b.js"><link rel="prefetch" href="/TIL/assets/js/26.faa6bb2e.js"><link rel="prefetch" href="/TIL/assets/js/27.4de87297.js"><link rel="prefetch" href="/TIL/assets/js/28.4473a96f.js"><link rel="prefetch" href="/TIL/assets/js/29.4551d769.js"><link rel="prefetch" href="/TIL/assets/js/3.7938505f.js"><link rel="prefetch" href="/TIL/assets/js/30.c0f04313.js"><link rel="prefetch" href="/TIL/assets/js/31.e990f6c1.js"><link rel="prefetch" href="/TIL/assets/js/32.4f1f33a4.js"><link rel="prefetch" href="/TIL/assets/js/33.1d46684b.js"><link rel="prefetch" href="/TIL/assets/js/34.30c7a1f6.js"><link rel="prefetch" href="/TIL/assets/js/35.51535786.js"><link rel="prefetch" href="/TIL/assets/js/36.41310eb1.js"><link rel="prefetch" href="/TIL/assets/js/37.2e9db11f.js"><link rel="prefetch" href="/TIL/assets/js/38.5792cf1b.js"><link rel="prefetch" href="/TIL/assets/js/39.5c4d7537.js"><link rel="prefetch" href="/TIL/assets/js/4.865692a8.js"><link rel="prefetch" href="/TIL/assets/js/40.d32b2705.js"><link rel="prefetch" href="/TIL/assets/js/41.f0a25595.js"><link rel="prefetch" href="/TIL/assets/js/42.256ebdde.js"><link rel="prefetch" href="/TIL/assets/js/43.205790b4.js"><link rel="prefetch" href="/TIL/assets/js/44.046707a6.js"><link rel="prefetch" href="/TIL/assets/js/45.b8addd51.js"><link rel="prefetch" href="/TIL/assets/js/46.5c7d6332.js"><link rel="prefetch" href="/TIL/assets/js/47.d11d3aeb.js"><link rel="prefetch" href="/TIL/assets/js/48.81b2f8a1.js"><link rel="prefetch" href="/TIL/assets/js/49.07056705.js"><link rel="prefetch" href="/TIL/assets/js/5.81254301.js"><link rel="prefetch" href="/TIL/assets/js/50.048d3029.js"><link rel="prefetch" href="/TIL/assets/js/51.9fa93b75.js"><link rel="prefetch" href="/TIL/assets/js/52.10312763.js"><link rel="prefetch" href="/TIL/assets/js/53.aea77d3f.js"><link rel="prefetch" href="/TIL/assets/js/55.bf56dd6f.js"><link rel="prefetch" href="/TIL/assets/js/56.db80b413.js"><link rel="prefetch" href="/TIL/assets/js/57.0a6f3ff6.js"><link rel="prefetch" href="/TIL/assets/js/58.3f7acae4.js"><link rel="prefetch" href="/TIL/assets/js/59.50bf3251.js"><link rel="prefetch" href="/TIL/assets/js/6.6e8c67be.js"><link rel="prefetch" href="/TIL/assets/js/60.45fe1655.js"><link rel="prefetch" href="/TIL/assets/js/61.a80c3251.js"><link rel="prefetch" href="/TIL/assets/js/62.dff4315a.js"><link rel="prefetch" href="/TIL/assets/js/63.42b0f40b.js"><link rel="prefetch" href="/TIL/assets/js/64.ad8dfe5f.js"><link rel="prefetch" href="/TIL/assets/js/65.cacdf83a.js"><link rel="prefetch" href="/TIL/assets/js/66.be38f613.js"><link rel="prefetch" href="/TIL/assets/js/67.5338187c.js"><link rel="prefetch" href="/TIL/assets/js/68.6ce74c2f.js"><link rel="prefetch" href="/TIL/assets/js/69.c6449070.js"><link rel="prefetch" href="/TIL/assets/js/7.11b51e05.js"><link rel="prefetch" href="/TIL/assets/js/70.f9b186d0.js"><link rel="prefetch" href="/TIL/assets/js/71.0757817a.js"><link rel="prefetch" href="/TIL/assets/js/72.8526f5b0.js"><link rel="prefetch" href="/TIL/assets/js/73.96203167.js"><link rel="prefetch" href="/TIL/assets/js/74.262159bf.js"><link rel="prefetch" href="/TIL/assets/js/75.e79e0bca.js"><link rel="prefetch" href="/TIL/assets/js/76.92d5080e.js"><link rel="prefetch" href="/TIL/assets/js/8.fbeed53e.js"><link rel="prefetch" href="/TIL/assets/js/9.7af81715.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.7d1de6ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">TIL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/jaesungahn91" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://velog.io/@ahnjs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/jaesungahn91" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://velog.io/@ahnjs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>2022</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/2022/0102.html" class="sidebar-link">0102 - 0109</a></li><li><a href="/TIL/2022/0110.html" class="sidebar-link">0110 - 0116</a></li><li><a href="/TIL/2022/0117.html" class="sidebar-link">0117 - 0123</a></li><li><a href="/TIL/2022/0124.html" class="sidebar-link">0124 - 0206</a></li><li><a href="/TIL/2022/0211.html" class="sidebar-link">0211 - 0220</a></li><li><a href="/TIL/2022/0221.html" class="sidebar-link">0221 - 0227</a></li><li><a href="/TIL/2022/0228.html" class="sidebar-link">0228 - 0313</a></li><li><a href="/TIL/2022/0314.html" aria-current="page" class="active sidebar-link">0314 - 0320</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2022/0314.html#_0314-spring-boot-maven-plugin" class="sidebar-link">0314 - spring-boot-maven-plugin</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0314.html#_0315-swagger-3-변경-사항" class="sidebar-link">0315 - swagger 3 변경 사항</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0314.html#_0316-valid와-validated를-이용한-유효성-검증의-동작-원리-및-사용법-예시-1-2" class="sidebar-link">0316 - @Valid와 @Validated를 이용한 유효성 검증의 동작 원리 및 사용법 예시 (1/2)</a></li><li class="sidebar-sub-header"><a href="/TIL/2022/0314.html#_0320-커스텀-애노테이션-custom-annotation-로-직접-유효성-검사" class="sidebar-link">0320 - 커스텀 애노테이션(Custom Annotation)로 직접 유효성 검사</a></li></ul></li><li><a href="/TIL/2022/0321.html" class="sidebar-link">0321 - 0328</a></li><li><a href="/TIL/2022/0328.html" class="sidebar-link">0329 ~ 0403</a></li><li><a href="/TIL/2022/0404.html" class="sidebar-link">0404 ~ 0410</a></li><li><a href="/TIL/2022/0411.html" class="sidebar-link">0411 ~ 0417</a></li><li><a href="/TIL/2022/0418.html" class="sidebar-link">0418 ~ 0424</a></li><li><a href="/TIL/2022/0425.html" class="sidebar-link">0425 ~ 0501</a></li><li><a href="/TIL/2022/0502.html" class="sidebar-link">0502 ~ 0515</a></li><li><a href="/TIL/2022/0516.html" class="sidebar-link">0516 ~ 0529</a></li><li><a href="/TIL/2022/0523.html" class="sidebar-link">0523 ~ 0605</a></li><li><a href="/TIL/2022/0606.html" class="sidebar-link">0606 ~ 0619</a></li><li><a href="/TIL/2022/0627.html" class="sidebar-link">0627 ~ 0703</a></li><li><a href="/TIL/2022/0711.html" class="sidebar-link">0711 ~ 0717</a></li><li><a href="/TIL/2022/0718.html" class="sidebar-link">0718 ~ 0724</a></li><li><a href="/TIL/2022/0725.html" class="sidebar-link">0725 ~ 0807</a></li><li><a href="/TIL/2022/0808.html" class="sidebar-link">0808 ~ 0814</a></li><li><a href="/TIL/2022/0815.html" class="sidebar-link">0815 ~ 0824</a></li><li><a href="/TIL/2022/0822.html" class="sidebar-link">0822 ~ 0911</a></li><li><a href="/TIL/2022/0912.html" class="sidebar-link">0912 ~ 0918</a></li><li><a href="/TIL/2022/0919.html" class="sidebar-link">0919 ~ 0925</a></li><li><a href="/TIL/2022/0926.html" class="sidebar-link">0926 ~ 1002</a></li><li><a href="/TIL/2022/1003.html" class="sidebar-link">1003 ~ 1009</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2021</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_0314-0320"><a href="#_0314-0320" class="header-anchor">#</a> 0314 - 0320</h1> <h2 id="_0314-spring-boot-maven-plugin"><a href="#_0314-spring-boot-maven-plugin" class="header-anchor">#</a> 0314 - spring-boot-maven-plugin</h2> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>플러그인 등록 유무에 따른 jar파일 내의 META-INF/MANIFEST.MF 정보</p></blockquote> <ul><li>Main-Class : Springboot application이기 때문에 Main-Class의 Value에 Springboot의 org.springframework.boot.loader.JarLauncher로 지정</li> <li>Start-Class : 어플리케이션의 MainClass를 Start-Class의 Value에 정의한다.</li> <li>Spring-Boot-Classes : 컴파일된 class파일들이 위치한 경로를 정의한다.</li> <li>Spring-Boot-Lib : pom.xml에 추가한 의존하고 있는 라이브러리들이 위치한 경로를 정의한다.</li></ul> <p>위와 같은 정보들을 spring-boot-maven-plugin이 추가해준다.</p> <p>spring-boot-maven-plugin은 단순히 MANIFEST.MF에 추가적인 정보를 등록해주는 것만은 아니다. 이플러그인의 핵심은 패키징할 때 다음과 같이 실행 가능한 jar파일로 구조를 변경해준다. (spring-boot-maven-plugin은 BOOT-INF에 컴파일된 class파일을 두는 특이한 구조를 갖추고있다. 그리고 JarLauncher가 이 구조에 있는 class파일/jar파일을 로딩하는 역할을 한다.)</p> <br> <h2 id="_0315-swagger-3-변경-사항"><a href="#_0315-swagger-3-변경-사항" class="header-anchor">#</a> 0315 - swagger 3 변경 사항</h2> <ol><li>springdoc-openapi-ui 종속성 추가</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springdoc-openapi-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.6.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>annotations 변경</li></ol> <ul><li>@Api → @Tag</li> <li>@ApiIgnore → @Parameter(hidden = true) or @Operation(hidden = true) or @Hidden</li> <li>@ApiImplicitParam → @Parameter</li> <li>@ApiImplicitParams → @Parameters</li> <li>@ApiModel → @Schema</li> <li>@ApiModelProperty(hidden = true) → @Schema(accessMode = READ_ONLY)</li> <li>@ApiModelProperty → @Schema</li> <li>@ApiOperation(value = &quot;foo&quot;, notes = &quot;bar&quot;) → @Operation(summary = &quot;foo&quot;, description = &quot;bar&quot;)</li> <li>@ApiParam → @Parameter</li> <li>@ApiResponse(code = 404, message = &quot;foo&quot;) → @ApiResponse(responseCode = &quot;404&quot;, description = &quot;foo&quot;)</li></ul> <ol start="3"><li>config 변경</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">GroupedOpenApi</span> <span class="token function">publicApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">GroupedOpenApi</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">&quot;springshop-public&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">pathsToMatch</span><span class="token punctuation">(</span><span class="token string">&quot;/public/**&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">GroupedOpenApi</span> <span class="token function">adminApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">GroupedOpenApi</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">&quot;springshop-admin&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">pathsToMatch</span><span class="token punctuation">(</span><span class="token string">&quot;/admin/**&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">addMethodFilter</span><span class="token punctuation">(</span>method <span class="token operator">-&gt;</span> method<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">Admin</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">OpenAPI</span> <span class="token function">springShopOpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">&quot;SpringShop API&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">&quot;Spring shop sample application&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">&quot;v0.0.1&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">license</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">License</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;Apache 2.0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">&quot;http://springdoc.org&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">externalDocs</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ExternalDocumentation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">&quot;SpringShop Wiki Documentation&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">&quot;https://springshop.wiki.github.org/docs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>https://www.baeldung.com/spring-rest-openapi-documentation<br>
https://springdoc.org/</p> <br> <h2 id="_0316-valid와-validated를-이용한-유효성-검증의-동작-원리-및-사용법-예시-1-2"><a href="#_0316-valid와-validated를-이용한-유효성-검증의-동작-원리-및-사용법-예시-1-2" class="header-anchor">#</a> 0316 - @Valid와 @Validated를 이용한 유효성 검증의 동작 원리 및 사용법 예시 (1/2)</h2> <p>Spring으로 개발을 하다 보면 DTO 또는 객체를 검증해야 한다. 이를 별도의 검증 클래스로 만들어 사용할 수 있지만 간단한 검증의 경우에는 JSR 표준을 이용해 간견ㄹ하게 처리할 수 있따.</p> <h3 id="_1-valid와-validated"><a href="#_1-valid와-validated" class="header-anchor">#</a> 1. @Valid와 @Validated</h3> <h4 id="valid를-이용한-유효성-검증"><a href="#valid를-이용한-유효성-검증" class="header-anchor">#</a> [ @Valid를 이용한 유효성 검증 ]</h4> <h5 id="valid의-개념-및-사용법"><a href="#valid의-개념-및-사용법" class="header-anchor">#</a> &lt; @Valid의 개념 및 사용법 &gt;</h5> <p>@Valid는 JSR-303 표준 스펙으로써 <code>제약 조건이 부여된 객체에 대해 빈 검증기(Bean Validator)를 이용해서 검증하도록 지시하는 어노테이션</code>이다. Spring에서는 LocalValidatorFactoryBean을 이용해 JSR 표준의 검증 기능을 사용할 수 있는데, LocalValidatorFactoryBean은 JSR-303의 검증 기능을 이용할 수 있도록 해주는 일종의 어댑터에 해당한다.<br>
JSR 표준의 빈 검증 기술의 특징은 객체의 필드에 달린 제약조건 어노테이션을 참고해 검증을 편리하게 할 수 있다는 것이다. 이 빈 검증 기능을 이용하려면 LocalValidatorFactoryBean을 빈으로 등록하고 ValidationService를 제공해주어야 하는데, SpringBoot에서는 의존성만 추가하면 검증을 위한 빈들이 자동으로 등록된다.</p> <h5 id="valid의-동작-원리"><a href="#valid의-동작-원리" class="header-anchor">#</a> &lt; @Valid의 동작 원리 &gt;</h5> <p>모든 요청은 프론트 컨트롤러인 디스패처 서블릿을 통해 컨트롤러로 전달된다. 그리고 컨트롤러의 메소드 호출하는 과정에는 메소드의 값을 처리해주는 ArgumentResolver가 동작하는데, @Valid 역시 ArgumentResolver에 의해 처리가 된다.<br>
대표적으로 @RequestBody가 있는 경우에는 Json 메세지를 객체로 변환해주는 작업이 ArgumentResolver의 구현체인 RequestResponseBodyMethodProcessor가 처리하며, 이 내부에서 @Valid로 시작하는 어노테이션이 있을 경우에 유효성 검사를 진행한다. (이러한 이유로 @Valid가 ㅇ아니라 커스톰 어노테이션인 @Valid커스텀네임여도 동작한다.) 만약 ModelAttribute를 사용중이라면 ModelAttributeMethodProcessor에 의해 @Valid가 처리된다. 그리고 검증에 오류가 있다면 MethodArgumentNotValidException 예외가 발생하게 되고, 디스패처 서블릿에 기본으로 등록된 예외 리졸벼(Exception Resolver)인 DefaultHandlerExceptionResolver에 의해 400 BadRequest에러가 발생한다.</p> <p>이러한 이유로 @Valid는 기본적으로 컨트롤러에서만 동작하며 기본적으로 다른 계층에서는 검증이 되지 않는다. 다른 계층에서 파라미터를 검증하기 위해서는 @Validated와 결합되어야 한다.</p> <h4 id="validated를-이용한-유효성-검증"><a href="#validated를-이용한-유효성-검증" class="header-anchor">#</a> [ @Validated를 이용한 유효성 검증 ]</h4> <h5 id="validated의-개념-및-사용법"><a href="#validated의-개념-및-사용법" class="header-anchor">#</a> &lt; @Validated의 개념 및 사용법 &gt;</h5> <p>파라미터의 유효성 검증은 컨트롤러에서 처리하고 서비스나 레포지토리 계층에서는 유효성 검증을 하지 않는 것이 바람직하다. 하지만 개발을 진행하다보면 불가피하게 다른 곳에서 파라미터를 검증해야 할 수 있다.<br>
Spring에서는 이런 경우를 위해 <code>AOP기반으로 메소드를의 요청을 가로채서 유효성 검증을 진행</code> 할 수 있는 @Validated를 제공하고 있다. @Validated는 JSR 표준 기술이 아니며 Spring 프레임워크에서 제공하는 어노테이션 및 기능이다.<br>
다음과 같이 클래스 레벨에 @Validated를 붙여주고, 유효성을 검증할 메소드의 파라미터에 @Valid를 분여주면 유효성 검증이 진행된다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token annotation punctuation">@Validated</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Valid</span> <span class="token class-name">UserRequestDto</span> userRequestDto<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="validated의-동작-원리"><a href="#validated의-동작-원리" class="header-anchor">#</a> &lt; @Validated의 동작 원리 &gt;</h5> <p>특정 ArgumentResolver에 의해 유효성 검사가 진행되었던 @Valid와 달리 @Validated는 AOP 기반으로 메소드 요청을 인터셉터하여 처리된다. @Validated를 클래스 레벨에 선언하면 해당 클래스에 유효성 검증을 위한 인터셉터가 등록된다. 그리고 해당 클래스의 메소드들이 호출될 때 AOP의 포인트 컷으로써 요청을 가로채서 인터셉터를 통해 유효성 검증을 진행한다 (물론 이러한 동작을 위해 @Validated가 붙은 클래스는 CGLib 기반으로 바이트 조작이 된다.)<br>
이러한 이유로 @Validated를 사용하면 컨트롤러, 서비스, 레포지토리 등 계층에 무관하게 스프링 빈이라면 유효성 검증을 진행할 수 있다. 물론 @Validated에 의한 예외 클래스도 다른데 @Valid에 의한 예외 클래스는 MethodArgumentNotValidException이며, @Validated에 의한 예외 클래스는 ConstrainViolationException이다. 이러한 정보를 알고 있으면 나중에 예외 처리를 할 때 도움이 된다.</p> <h5 id="validated의-또-다른-기능-유효성-검증-그룹의-지정"><a href="#validated의-또-다른-기능-유효성-검증-그룹의-지정" class="header-anchor">#</a> &lt; Validated의 또 다른 기능(유효성 검증 그룹의 지정) &gt;</h5> <p>객체를 검증하기 위한 방법이 클래스에 따라 달라질 수 있다. 예를 들면 일반 사용자의 요청과 관리자의 요청을 보내는 경우에 같은 객체로 요청이 오지만 다른 방식으로 검증해야 하는 경우이다. 이런 경우에는 검증에 사용할 제약 조건이 2가지로 나누어져야 한다.<br>
Spring에서는 이런 경우를 위해 제약 조건 어노테이션에 조건이 적용될 검증 그룹을 지정하여 적용할 수 있는 기능 역시 @Validated를 통해 제공하고 있다.<br>
검증 그룹을 지정하기 위해서는 (내용이 없는)마커 인터페이스를 간단히 정의해야 한다. 위의 예시의 경우에는 사용자인 경우와 관리자인 경우를 분리해야 하므로 다음과 같은 2개의 마커 인터페이스를 만들 수 있다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserValidationGroup</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AdminValidationGroup</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>그리고 해당 제약 조건이 적용될 그룸을 groups로 지정해줄 수 있다. 제약 조건이 적용될 그룹이 여러 개라면 {}를 이용해 그룹의 이름을 모두 넣어주면 된다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@NotEmpty</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">UserValidationGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">AdminValidationGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

<span class="token annotation punctuation">@NotEmpty</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token class-name">UserValidationGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> userId<span class="token punctuation">;</span>

<span class="token annotation punctuation">@NotEmpty</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token class-name">AdminValidationGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> adminId<span class="token punctuation">;</span>
</code></pre></div><p>그리고 컨트롤러에서도 다음과 같이 제약조건 검증을 적용할 클래스를 지정해주면 된다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/add&quot;</span><span class="token punctuation">)</span> 
<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token annotation punctuation">@Validated</span><span class="token punctuation">(</span><span class="token class-name">UserValidationGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token class-name">UserRequestDto</span> userRequestDto<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
<span class="token punctuation">}</span>
</code></pre></div><p>만약 위와 같이 UserValidationGroup을 @Validated의 파라미터로 넣어주었다면 UserValidationGroup에 해당하는 제약 조건만 검증이 된다. 만약 @Validated에 특정 마커를 지정해주지 않았거나, groups가 지정되어 있는데 @Valid를 이용한다면 다음과 같이 처리된다.</p> <ul><li>@Validated에 특정 클래스를 지정하지 않는 경우 : groups가 없는 속성들만 처리</li> <li>@Valid or @Valdated에 특정 클래스를 지정한 경우 : 지정된 클래스를 groups로 가진 제약사항만 처리</li></ul> <h4 id="다양한-제약-조건-어노테이션"><a href="#다양한-제약-조건-어노테이션" class="header-anchor">#</a> [ 다양한 제약 조건 어노테이션 ]</h4> <p>JSR 표준 스펙은 다양한 제약 조건 어노테이션을 제공하고 있는데, 대표적인 어노테이션으로는 다음과 같은 것들이 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>@NotNull: 해당 값이 null이 아닌지 검증함
@NotEmpty: 해당 값이 null이 아니고, 빈 스트링(&quot;&quot;) 아닌지 검증함(&quot; &quot;은 허용됨)
@NotBlank: 해당 값이 null이 아니고, 공백(&quot;&quot;과 &quot; &quot; 모두 포함)이 아닌지 검증함
@AssertTrue: 해당 값이 true인지 검증함
@Size: 해당 값이 주어진 값 사이에 해당하는지 검증함(String, Collection, Map, Array에도 적용 가능)
@Min: 해당 값이 주어진 값보다 작지 않은지 검증함
@Max: 해당 값이 주어진 값보다 크지 않은지 검증함
@Pattern: 해당 값이 주어진 패턴과 일치하는지 검증함
</code></pre></div><p>그 외에도 주어진 값이 이메일 형식에 해당하는지 검증하는 @Email 등 다양한 어노테이션을 제공하고 있는데, 필요한 어노테이션이 있는지는 <a href="https://javaee.github.io/javaee-spec/javadocs/javax/validation/constraints/package-summary.html" target="_blank" rel="noopener noreferrer">자바공식문서<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>를 참고하면 된다<br>
그 외에도 hibernate의 Validator는 해당 값이 URL인지를 검증하는 @URL 등과 같은 어노테이션을 제공하고 있다. 즉, 우리가 필요로 하는 대부분의 제약 사항 어노테이션은 이미 구현되어 있으므로 찾아서 활용한다.</p> <h3 id="valid와-validated-유효성-검증-차이"><a href="#valid와-validated-유효성-검증-차이" class="header-anchor">#</a> @Valid와 @Validated 유효성 검증 차이</h3> <h4 id="valid"><a href="#valid" class="header-anchor">#</a> @Valid</h4> <ul><li>JSR-303 자바 표준 스펙</li> <li>특정 ArgumentResolver를 통해 진행되어 컨트롤러 메소드의 유효성 검증만 가능</li> <li>유효성 검증에 실패할 경우 MethodArgmentNotValidException이 발생</li></ul> <h4 id="validated"><a href="#validated" class="header-anchor">#</a> @Validated</h4> <ul><li>자바 표준 스펙이 아닌 스프링 프레임워크가 제공</li> <li>AOP 기반으로 스프링 빈의 유효성 검증을 위해 사용되며 클래스에는 @Validated를, 메소드에는 @Valid를 붙여준다</li> <li>유효성 검증에 실패할 경우 ConstraintViolationException이 발생</li></ul> <p>별개로 Message Interpolator를 이용하면 유효성 검증이후 메세지를 다국어 처리 할 수 도 있다.</p> <p>https://mangkyu.tistory.com/174</p> <br> <h2 id="_0320-커스텀-애노테이션-custom-annotation-로-직접-유효성-검사"><a href="#_0320-커스텀-애노테이션-custom-annotation-로-직접-유효성-검사" class="header-anchor">#</a> 0320 - 커스텀 애노테이션(Custom Annotation)로 직접 유효성 검사</h2> <h4 id="검증을-위한-커스텀-어노테이션-생성"><a href="#검증을-위한-커스텀-어노테이션-생성" class="header-anchor">#</a> [ 검증을 위한 커스텀 어노테이션 생성 ]</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span>FIELD<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Constraint</span><span class="token punctuation">(</span>validatedBy <span class="token operator">=</span> <span class="token class-name">PhoneValidator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;Invalid Phone&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">groups</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Payload</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">payload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>@Target({FIELD}) : 해당 어노테이션을 필드에만 선언 가능함</li> <li>@Retention(RUNTIME) : 해당 어노테이션이 유지되는 시간으로써 런타임까지 유효함</li> <li>@Constraint(validatedBy = PhoneValidator.class) : PhoneValidator를 통해 유효성 검사를 진행함</li> <li>@Documented : JavaDoc 생성시 Annotation에 대한 정보도 함께 생성</li></ul> <p>아래의 3가지 속성들은 JSR-303 표준 어노테이션등리 갖는 공통 속성들이다. 해당 속성들은 각각 다음의 역할을 한다.</p> <ul><li>message : 유효하지 않을 경우 반환할 메세지</li> <li>groups : 유효성 검증이 진행될 그룹</li> <li>payload : 유효성 검증 시에 전달할 메타 정보</li></ul> <h4 id="검증을-위한-validator-구현"><a href="#검증을-위한-validator-구현" class="header-anchor">#</a> [ 검증을 위한 Validator 구현 ]</h4> <p>구현할 Validator는 JSR에서 제공하는 javax.validation의 ConstraintValidator 인터페이스를 구현해주어야 한다. 해당 인터페이스는 다음과 같이 생성되어 있다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ConstraintValidator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">Annotation</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> 
    
    <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token class-name">A</span> constraintAnnotation<span class="token punctuation">)</span> <span class="token punctuation">{</span> 

    <span class="token punctuation">}</span> 
    
    <span class="token keyword">boolean</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token class-name">T</span> value<span class="token punctuation">,</span> <span class="token class-name">ConstraintValidatorContext</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token punctuation">}</span>
</code></pre></div><p>위의 인터페이스는 2가지 제네릭 타입을 받고 있는데, 순서대로 적용될 어노테이션과 적용될 타입에 해당된다. 또한 ConstraintValidator가 갖는 메소드들은 각각 다음의 역할을 한다.</p> <ul><li>initialize : Valdator를 초기화하기 위한 메소드</li> <li>isValid : 유효성을 검증하는 메소드</li></ul> <p>intialize는 기본적으로 default 메소드로 구현되어 있으므로 초기화할 작업이 없다면 따로 구현해주지 않아도 된다. initialize는 isValid가 처음 호출될 때 1회 호출된다. isValid에는 우리가 검증할 로직을 구현주면 된다.<br>
이제 연락처를 검증하기 위한 Validator를 구현하면 다음과 같다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PhoneValidator</span> <span class="token keyword">implements</span> <span class="token class-name">ConstraintValidator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Phone</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">,</span> <span class="token class-name">ConstraintValidatorContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;\\d{3}-\\d{4}-\\d{4}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 예제</span>
        <span class="token class-name">Matcher</span> matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> matcher<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TIL/2022/0228.html" class="prev">
        0228 - 0313
      </a></span> <span class="next"><a href="/TIL/2022/0321.html">
        0321 - 0328
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/TIL/assets/js/app.5de8cb9d.js" defer></script><script src="/TIL/assets/js/2.4f3b10d1.js" defer></script><script src="/TIL/assets/js/54.28695de9.js" defer></script>
  </body>
</html>
